//单机和集群
//都是采用滑动窗口算法

//限流(普通限流,资源限流),
// sentinel-flow-资源名称-(不同类型的参数)-(节点名称-集群名称)
// sentinel-param-flow-资源名称-参数名称-(不同类型的参数)-(节点名称-集群名称)

// sentinel-熔断降级不同类型的固定key-资源名称-(不同类型的参数)(-节点名称-集群名称)
// 还有一个固定的参数 => 断路器状态 open,close,half-open
// 记录最后一次打开的时间  从打开 变成 半开=> 超过了等待时间(1000ms),如果再次出现了异常的话,
// 熔断降级(异常数(1s内 异常数),响应时间(1s内有30个请求>300ms),异常比例(1s内 异常数/请求总数))



// 异常数 key设计: 1000(时间)-300(总请求数要大于)-200(异常数)
//       value设计:  异常数 
// 响应时间: 1000(时间)-300(超时时间)-请求数
//        value设计: 超时的时间数 | 总请求数
// 异常比例: 1000(时间)-0-1)
//       value设计:  异常数 / 记录总数



// 

// 1000ms 
// 窗口个数
// 每个窗口的时间ms
// 开始时间和异常数
//打开之后再次重试的时间间隔(ms)


// 记录最后的打开时间
// 记录断路器的状态

// 关闭,半开,打开,4(变成了半开)
//判断断路器是否打开, 打开了(可以重试(时间是否满足),满足的了话,变成半开)|关闭的话,直接返回|半开的话,说明直接返回(说明有人重试了)

//没有blockException
//业务异常
// 统计 => 变状态



// sentinel-param-flow-资源名称-参数名称-(不同类型的参数)-(节点名称-集群名称)
// 1000ms 时间
// 1000(限流阈值)
// 所需窗口 4个窗口
// 每个窗口所需的ms数 1000/4 = 250ms
// 通过所需要阈值 1
// key的时间